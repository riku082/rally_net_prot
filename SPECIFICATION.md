# Rally Net アプリケーション仕様書

## 1. プロジェクト概要

### 1.1 アプリケーション名
**Rally Net** - バドミントン総合分析プラットフォーム

### 1.2 目的
バドミントンプレイヤーおよびチーム向けに、試合分析、プレイヤー管理、MBTI診断、練習管理、トーナメント追跡機能を提供する総合的なWebアプリケーション。

### 1.3 対象ユーザー
- バドミントン愛好家（初心者〜上級者）
- チーム・クラブの指導者
- バドミントンコーチ
- 大会運営者

## 2. 技術仕様

### 2.1 フロントエンド技術スタック
- **フレームワーク**: Next.js 15.2.5（App Router）
- **UIライブラリ**: React 19
- **言語**: TypeScript 5
- **スタイリング**: Tailwind CSS 4
- **アイコン**: Lucide React, React Icons
- **チャート**: Chart.js with react-chartjs-2
- **日付処理**: date-fns 4.1.0

### 2.2 バックエンド・インフラ
- **BaaS**: Firebase
  - **認証**: Firebase Authentication
  - **データベース**: Cloud Firestore
  - **ストレージ**: Firebase Storage
  - **ホスティング**: Firebase Hosting
- **管理SDK**: Firebase Admin SDK 13.4.0

### 2.3 開発環境
- **ビルドツール**: Turbopack（開発環境）
- **パッケージマネージャー**: npm
- **リンター**: ESLint 9 with Next.js config
- **型チェック**: TypeScript strict mode

## 3. システムアーキテクチャ

### 3.1 ディレクトリ構造
```
src/
├── app/                    # Next.js App Router
│   ├── api/               # APIエンドポイント
│   ├── admin/             # 管理機能
│   ├── practice-cards/    # 練習カード管理
│   ├── practice/          # 練習セッション
│   ├── matches/           # 試合記録
│   ├── mbti/              # MBTI診断
│   └── profile/           # ユーザープロフィール
├── components/            # Reactコンポーネント
├── context/               # Context Providers
├── types/                 # TypeScript型定義
└── utils/                 # ユーティリティ関数
```

### 3.2 データモデル

#### ユーザー関連
- **UserProfile**: ユーザープロフィール情報
- **AuthContext**: 認証状態管理

#### 練習関連
- **Practice**: 練習記録
- **PracticeCard**: 練習カード（テンプレート）
- **PracticeRoutine**: 練習ルーティン
- **PracticeVisualInfo**: コート可視化情報

#### 試合関連
- **Match**: 試合記録
- **Player**: プレイヤー情報

#### MBTI関連
- **MBTIResult**: MBTI診断結果
- **MBTIQuestion**: 診断質問
- **PlayStyleAnalysis**: プレイスタイル分析

## 4. 主要機能仕様

### 4.1 認証・ユーザー管理

#### 4.1.1 認証機能
- **ログイン/サインアップ**: メール・パスワード認証
- **メール認証**: 新規登録後のメール認証必須
- **パスワードリセット**: メールによるリセット機能
- **セッション管理**: Firebase Authによる自動管理

#### 4.1.2 プロフィール管理
- **基本情報**: 名前、メール、アバター画像
- **プレイヤー情報**: 経験レベル、プレイスタイル、所属チーム
- **プライバシー設定**: プロフィール公開設定

### 4.2 練習管理機能

#### 4.2.1 練習カード
- **作成・編集**: ビジュアルエディタによる練習メニュー作成
- **テンプレート**: 基礎練習、ゲーム練習、フィジカルなど
- **共有機能**: 公開/非公開設定、コミュニティ共有
- **評価システム**: 5段階評価、使用回数トラッキング

#### 4.2.2 コート可視化
- **プレイヤー配置**: ドラッグ&ドロップによる配置
- **ショット軌道**: 矢印による軌道表示
- **エリア選択**: コートゾーン別の練習エリア指定
- **アニメーション**: 練習手順のステップ表示

#### 4.2.3 練習記録
- **日次記録**: 日付、時間、練習内容
- **スキル評価**: 12カテゴリーのスキル評価
- **統計分析**: 月次統計、改善トレンド
- **目標設定**: 練習目標の設定と進捗管理

### 4.3 試合分析機能

#### 4.3.1 試合記録
- **基本情報**: 日付、対戦相手、スコア
- **形式**: シングルス/ダブルス
- **動画連携**: YouTube動画IDによる動画紐付け

#### 4.3.2 分析機能
- **統計データ**: 勝率、得失点分析
- **パフォーマンス推移**: 時系列での成績推移
- **対戦履歴**: 相手別の対戦成績

### 4.4 MBTI診断機能

#### 4.4.1 診断システム
- **質問形式**: 4軸（E/I, S/N, T/F, J/P）の診断
- **16タイプ分類**: ESTJ〜INFPの16タイプ
- **信頼度スコア**: 回答の一貫性評価

#### 4.4.2 プレイスタイル分析
- **強み・弱み**: タイプ別の特性分析
- **推奨練習**: タイプに応じた練習提案
- **パートナー相性**: ダブルスパートナーの相性診断

### 4.5 ソーシャル機能

#### 4.5.1 フレンド機能
- **フレンドリクエスト**: 送信・承認・拒否
- **フレンドリスト**: 一覧表示、プロフィール閲覧
- **プライバシー**: フレンドのみ公開設定

#### 4.5.2 コミュニティ機能
- **練習カード共有**: 公開カードの検索・利用
- **評価・コメント**: カードへの評価とフィードバック
- **ランキング**: 人気カード、貢献者ランキング

### 4.6 その他の機能

#### 4.6.1 ニュースフィード
- **最新ニュース**: バドミントン関連ニュース表示
- **記事管理**: 管理者による記事投稿

#### 4.6.2 カレンダー機能
- **練習スケジュール**: 月次カレンダー表示
- **イベント管理**: 試合・練習の予定管理

#### 4.6.3 通知機能
- **フレンドリクエスト**: 新規リクエスト通知
- **システム通知**: アップデート、お知らせ

## 5. セキュリティ仕様

### 5.1 認証・認可
- **Firebase Authentication**: セキュアな認証基盤
- **メール認証**: アカウント作成時の必須確認
- **セッショントークン**: Firebase管理の安全なトークン

### 5.2 データアクセス制御
- **Firestore Security Rules**: 
  - ユーザー所有データの保護
  - メール認証済みユーザーのみ書き込み可能
  - プライバシー設定に基づく読み取り制限

### 5.3 データ保護
- **HTTPS通信**: 全通信の暗号化
- **入力検証**: クライアント・サーバー両側での検証
- **XSS対策**: React/Next.jsによる自動エスケープ

## 6. パフォーマンス仕様

### 6.1 最適化技術
- **Turbopack**: 高速な開発ビルド
- **画像最適化**: Next.js Image Componentによる最適化
- **コード分割**: 自動的なルートベースの分割
- **キャッシング**: Firebase CDNキャッシュ

### 6.2 レスポンシブデザイン
- **モバイルファースト**: スマートフォン優先設計
- **ブレークポイント**: sm(640px), md(768px), lg(1024px)
- **タッチ対応**: モバイルでの操作性重視

## 7. デプロイメント

### 7.1 環境構成
- **開発環境**: localhost:3000
- **ステージング**: Firebase Preview Channels
- **本番環境**: Firebase Hosting

### 7.2 CI/CD
- **ビルド**: `npm run build`
- **型チェック**: `npx tsc`
- **リント**: `npm run lint`
- **デプロイ**: Firebase CLIによる自動デプロイ

## 8. 今後の拡張予定

### 8.1 機能拡張
- **AI分析**: 動画解析による自動スコアリング
- **トーナメント管理**: 大会運営機能
- **リアルタイム対戦**: オンライン対戦記録
- **ウェアラブル連携**: スマートウォッチデータ連携

### 8.2 国際化
- **多言語対応**: 英語、中国語対応
- **地域別カスタマイズ**: 各国のバドミントン文化対応

## 9. サポート・メンテナンス

### 9.1 ユーザーサポート
- **ヘルプセンター**: FAQ、使い方ガイド
- **フィードバック**: アプリ内フィードバック機能
- **問い合わせ**: メールサポート

### 9.2 メンテナンス
- **定期アップデート**: 月次機能追加
- **バグ修正**: 継続的な品質改善
- **パフォーマンス監視**: Firebase Performance Monitoring

## 10. ライセンス・利用規約

### 10.1 ライセンス
- プライベートリポジトリ
- 商用利用制限あり

### 10.2 利用規約
- ユーザーデータの取り扱い
- コンテンツの著作権
- 免責事項

---

**バージョン**: 1.0.0  
**最終更新日**: 2025年8月24日  
**作成者**: Rally Net開発チーム